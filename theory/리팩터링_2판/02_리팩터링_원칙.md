# 리팩터링 원칙
## 2.1 리팩터링 정의
>>> 리팩터링: [명사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법

>>> 리팩터링(하다): [동사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성하다.

 <br />
 위 정의에 따르면, 코드를 정리하는 작업이 모두 리팩터링에 속하는 것이 아니고, 특정한 방식에 따라 코드를 정리하는 것만이 리팩토링에 속한다. 

 <br />

 >>> ex) 앞으로 몇 시간은 리팩터링(1)할 것 같은데 그 사이 적용하는 리팩터링(2)은 수십 가지나 될 것 같다.
 >>> 1) 동사
 >>> 2) 명사

 <br />
 
 리팩터링의 목적은 코드를 이해하고 수정하기 쉽게 만드는 것이다. 그 동안에는 코드가 항상 정상 작동하므로, 전체 작업이 끝나지 않아도 중단할 수 있다. 즉 리팩터링하기 전 후의 코드가 동일히 동작해야 한다.

 <br />
 <br />
 <br />

 ## 2.2 두 개의 모자

켄트 벡은 기능 추가와 리팩터링을 두 개의 모자에 비유했다.

기능을 추가할 때는 '기능 추가' 모자를 쓰고, 새 기능을 추가하기만 한다. 이 때 기존 코드는 건드리면 안된다. 진척도는 테스트를 추가해서 통과하는지 확인하는 방식으로 측정한다.

리팩터링을 할 때는, '리팩터링' 모자를 쓰고 기능 추가는 하지 않고 코드 재구성에 집중한다. 새로운 TC를 발견하거나 인터페이스를 변경해야하는 등의 특수 상황 외에는 테스트도 변경하지 않는다.

 <br />
 <br />
 <br />

 ## 2.3 리팩터링하는 이유

**1. 리팩터링하면 소프트웨어 설계가 좋아진다.**

 리팩터링은 소프트웨어의 내부 설계(아키텍처)를 파악하기 쉽게 하고, 이로써 코드의 구조를 지탱해준다. 이후에 수정을 하거나 기능 추가를 할 때, 드는 노력을 줄일 수 있다.

**2. 리팩터링하면 소프트웨어를 이해하기 쉬워진다.**

 작성한 사람 조차도 코드를 이해하는 데에도 시간이 필요하다. 이 코드의 목적이 잘 드러나게, 다시 말해 작성자의 의도를 더 명확하게 전달하도록 리팩터링을 통해 개선할 수 있다.

**3. 리팩터링하면 버그를 쉽게 찾을 수 있다.**

코드를 이해하기 쉽다는 말은 버그를 찾기 쉽다는 말이기도 하다. 리팩터링을 하면 코드가 하는 일을 깊이 파악하게 되면서, 새로운 인사이트를 얻을 수 있다. 또한 코드를 리팩터링하다보면 코드의 해상도가 올라가게 된다. 버그가 명확해지고, 가정하던 부분들이 분명히 드러난다.

>>> 난 뛰어난 프로그래머가 아니에요. 단지 뛰어난 습관을 지닌 괜찮은 프로그래머일 뿐이에요 - 켄트 벡

**4. 리팩터링하면 프로그래밍 속도를 높일 수 있다.**
 <img width="300" alt="스크린샷 2025-02-06 오후 10 01 29" src="https://github.com/user-attachments/assets/2ba370d6-1911-4b4e-9b05-ef9ec1a4e01b" />

 초기에는 기능을 곧바로 추가하는 것이 빠르지만, 규모가 커지면 추가할 수록 기존 코드베이스에 새 코드를 추가하는 데에 시간이 걸린다. 또한 기능을 추가하고 나면 버그가 발생하고, 이를 해결하는 데에는 더 많은 시간이 필요하다. 이런 부담이 겹쳐지면서 코드 개발에 시간이 더 필요해진다. 즉 시간이 x축, 기능의 누적이 y축인 2차원 좌표평면에서 나쁜 설계는 초반에 기울기가 가파르다가 점점 완만해지는 곡선의 양상을 나타낸다.

<img width="300" alt="스크린샷 2025-02-06 오후 10 01 41" src="https://github.com/user-attachments/assets/4d01e81f-9e95-4b2c-8776-6e3ab6a6972e" />

좋은 설계의 경우, 처음에는 시간 대비 기능의 누적 속도가 나쁜 설계보다 느리나, 이후 월등히 높은 상승세를 보인다. 이 원인은 소프트웨어 내부 품질에 있다. 내부 설계가 잘 되어있으면, 새로 기능을 추가할 지점과 고쳐야할 지점을 쉽게 찾을 수 있다. 이렇게 내부 품질이 뛰어난 코드베이스는 새 기능 구축을 돕는 견고한 토대가 된다.

 <br />
 <br />
 <br />

 ## 2.4 언제 리팩터링해야 할까?
>>> 3의 법칙(삼진 리팩터링) - 돈 로버츠
>>> 1. 처음에는 그냥 한다.
>>> 2. 비슷한 일을 두 번째로 하게 되면, 일단 계속 진행한다.
>>> 3. 비슷한 일을 세 번째 하게 되면 리팩터링한다.


 <br />

**준비를 위한 리팩터링: 기능을 쉽게 추가하게 만들기**

코드베이스에 기능을 새로 추가하거나, 버그를 잡을 때 리팩터링하기 좋다. 이 시점에 현재 코드를 살펴보면서, 구조를 바꿈으로써 작업이 편해질 구간을 찾는다. 중복 코드를 *함수 매개변수화하기*를 통해 줄일 수도 있다. 이를 통해 기반을 지속할 가능성을 높이는 동시에, 같은 곳에서 다른 버그가 발생할 가능성을 줄일 수도 있다.

**이해를 위한 리팩터랑: 코드를 이해하기 쉽게 만들기**
(작성중)