# 코드에서 나는 악취

 리팩터링의 '시점'을 파악하는 것은 작동 원리를 아는 것 못지않게 중요하나, 때로는 너무 간단하기에 그 시점을 파악해야하는 지에 대해서는 명확하게 정립된 규칙이 없다. 저자와 켄트는 리팩터링이 필요한 코드들은 일정한 패턴이 있다는 사실을 발견했다. 켄트 벡은 리팩터링할 '시점'을 설명하는 데 '냄새(smell)'란 표현을 사용했다. 이 챕터에서는 리팩터링하면 해결할 수 있는 문제의 징후를 제시한다.

 <br />
 <br />
 <br />

## 3.1 기이한 이름(Mysterious Name)

코드는 단순하고 명료하게 작성해야한다. 이를 지키는 데 가장 중요한 요소 중 하나는 '이름'이다. 어떤 모듈, 함수, 변수, 클래스 등은 이름만 보고도 각각이 무슨 일을 하고 어떻게 사용해야 하는지 명확히 알 수 있도록 해야한다. 그래야 나중에 문맥을 파악하느라 헤매는 시간을 크게 절약할 수 있다. `함수 선언 바꾸기`, `변수 이름 바꾸기`, `필드 이름 바꾸기` 등 리팩터링에도 이름을 바꾸는 기법들이 있다. 또한 변수의 이름을 정할 때, 마땅한 이름이 떠오르지 않는다면 설계에 더 근본적인 문제가 숨어있을 가능성이 높다.

 <br />
 <br />
 <br />

## 3.2 중복 코드(Duplicated Code)

코드가 중복되면 차이점을 찾는 데 부담이 생긴다. 또한 그 중 하나를 변경할 경우 다른 비슷한 코드들도 모두 살펴보고 적절히 수정해야 한다. 이런 경우 다음과 같이 리팩터링 기법을 대응할 수 있다.

|문제|기법|해결||
|--|--|--|--|
|한 클래스에 있는 두 메서드가 똑같은 표현식 사용|`함수 추출하기`|양쪽 모두 추출된 메서드를 호출하게 변경|6.1|
|코드가 비슷한데 완전히 똑같지는 않음|`문장 슬라이드하기`|비슷한 부분을 한 곳에 모은 후, `함수 추출하기` 적용 여부 판단|8.1|
|같은 부모로부터 파생된 서브 클래스들에 코드가 중복|`메서드 올리기`|각자 따로 호출되지 않도록 기법 적용, 부모로 이동시킴|12.1절|

 <br />
 <br />
 <br />

## 3.3 긴 함수

짧은 함수들로 구성된 코드 페이스를 얼핏 훑으면 연산하는 부분이 하나도 없어 보인다. 코드가 끝없이 위임하는 방식으로 작성되어 있기 때문이다. 간접 호출(indirection)의 효과, 즉 코드를 이해하고, 공유하고, 선택하기 쉬워진다는 장점은 함수를 짧게 구성할 때 나오는 것이다.