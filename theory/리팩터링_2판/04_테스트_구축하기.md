# 테스트 구축하기

리팩터링을 제대로 하려면 숨어있는 실수를 잡아주는 테스트 스위트가 뒷받침되어야 한다. 하지만 리팩터링을 하지 않더라도, 좋은 테스트를 작성하는 것은 개발 효율을 높혀준다.

<br />
<br />
<br />

## 4.1 자가 테스트 코드의 가치

> 모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자.

테스트가 성공했는 지 확인하려면 의도한 결과와 테스트 결과가 같은지만 비교하면 된다. 테스트 자동화를 통해 테스트에 들어가는 일을 줄일 수 있다. 이렇게 한다면 컴파일할 때마다 테스트도 함께 병행되면서 디버깅 시간이 줄어들어 생산성이 급상승한다. 이렇듯 자가 테스트 코드 자체뿐 아니라 테스트를 자주 수행하는 습관도 버그를 찾는 데에 큰 영향을 끼친다. 그러나 테스트를 작성하려면 소프트웨어 제품 본체 외의 부가적인 코드를 상당량 작성해야 한다. 효과를 경험하기 전에는 설득은 쉽지 않다.

테스트를 작성하기 가장 좋은 시점은 프로그래밍을 시작하기 전이다. 저자는 기능을 추가해야할 때부터 테스트를 작성한다. 이 경우 기능에 어떤 것이 필요할 지 고민할 수 있고, 구현보다 인터페이스에 집중하게 되는 장점이 있다. 그리고 테스트를 모두 통과한 시점이 코드를 완료한 시점이기에, 완료 시점을 정확하게 판단할 수 있다. 켄트 벡은 이처럼 테스트부터 작성하는 것을 기반으로 테스트 주도 개발(Text-Driven Development, TDD)이라는 기법을 창시했다. 이는 다음의 과정을 반복한다.

1. (처음에는 통과하지 못할) 테스트를 작성
2. 1을 통과하게끔 토드를 작성
3. 결과 코드를 리팩터링